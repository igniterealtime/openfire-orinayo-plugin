(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{510:function(e,t,n){"use strict";var r=n(2),o=n(22),c=n(23),l=n(30),d=n(17),f=n(35),h=n(5),m=(n(10),n(15),n(41),n(13),n(19),n(14),n(4),n(68),n(16),n(62),n(59),n(1)),v=n(44),y=n(73),k=n(239);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w=function(){return!!e})()}var _=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},x=function(e){function t(){return Object(o.a)(this,t),e=this,n=t,r=arguments,n=Object(d.a)(n),Object(l.a)(e,w()?Reflect.construct(n,r||[],Object(d.a)(e).constructor):n.apply(e,r));var e,n,r}return Object(f.a)(t,e),Object(c.a)(t,[{key:"title",get:function(){return""}},{key:"description",get:function(){return""}},{key:"appbar",get:function(){return{}}},{key:"resetAppbar",value:function(){this.setAppbar({title:"",style:"",show:!0,back:!0,home:!1,dark:!0,color:"#111"})}},{key:"setLang",value:function(){var e="en",t=navigator.language;t.includes("zh")?e=t.includes("zh-TW")||t.includes("zh-HK")?"zhTW":"zh":t.includes("es")?e="es":t.includes("ja")?e="ja":t.includes("de")&&(e="de"),this.$i18n.locale=e,document.title=this.title}},{key:"setPage",value:function(){this.setAppbar(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({title:this.title},this.appbar)),setTimeout(function(){Object(k.b)()},50)}},{key:"beforeDestroy",value:function(){this.resetAppbar()}}])}(m.a);_([Object(y.a)("app/SET_APPBAR")],x.prototype,"setAppbar",void 0),x=_([Object(v.a)({head:function(){return{title:this.title,meta:[{hid:"theme-color",name:"theme-color",content:"#040C11"}]}},beforeRouteEnter:function(e,t,n){n(function(e){e.setLang(),e.setPage()})}})],x),t.a=x},548:function(e,t,n){var content=n(586);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(21).default)("015d88a7",content,!0,{sourceMap:!1})},549:function(e,t,n){var content=n(588);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(21).default)("424f19d4",content,!0,{sourceMap:!1})},585:function(e,t,n){"use strict";n(548)},586:function(e,t,n){var r=n(20)(function(i){return i[1]});r.push([e.i,".user-card[data-v-22a8cfb5]{background:rgba(0,0,0,.3);border-radius:20px;box-shadow:0 0 20px rgba(0,0,0,.3);overflow:hidden;position:relative;width:100%}.user-card .top[data-v-22a8cfb5]{justify-content:space-between;left:0;position:absolute;right:0;top:0}.user-card .top .nickname[data-v-22a8cfb5]{word-break:break-all}.user-card .canvas-wrapper[data-v-22a8cfb5]{height:100px}.user-card .canvas-wrapper .canvas[data-v-22a8cfb5]{border-radius:20px;height:100%;width:100%}",""]),r.locals={},e.exports=r},587:function(e,t,n){"use strict";n(549)},588:function(e,t,n){var r=n(20)(function(i){return i[1]});r.push([e.i,".mute-all-btn[data-v-016ce605]{bottom:0;box-shadow:0 0 20px hsla(0,0%,100%,.08);margin:0 16px 68px 0;position:absolute}.cards[data-v-016ce605]{display:flex;flex-direction:row;flex-wrap:wrap}.hint-box[data-v-016ce605]{background:linear-gradient(-15deg,hsla(0,0%,100%,.12),hsla(0,0%,100%,.1));border-radius:20px;color:hsla(0,0%,100%,.7)}.hint-box.empty-hint[data-v-016ce605]{background:linear-gradient(-15deg,#90f,#0057fa)!important}.hint-box.error-hint[data-v-016ce605]{background:linear-gradient(-15deg,#ec5700,#be1d00)!important}",""]),r.locals={},e.exports=r},592:function(e,t,n){"use strict";n.r(t);var r=n(504),o=n(227),c=n(186),l=n(590),d=n(506),f=n(225),h=n(593),m=(n(85),n(22)),v=n(23),y=n(30),k=n(17),O=n(35),w=n(5),_=(n(33),n(41),n(61),n(45),n(158),n(36),n(13),n(4),n(68),n(62),n(82),n(59),n(44)),x=n(73),j=n(514),M=n(510),C=(n(10),n(51),n(53),n(48),n(25),n(42),n(24));n(84),n(516),n(518),n(519),n(574),n(14),n(46),n(520),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(16),n(47);function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,a){if(e){if("string"==typeof e)return R(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?R(e,a):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,c=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}function R(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}var A={audio:!0,video:!1},T=new(window.AudioContext||window.webkitAudioContext),D={},E="https://pade.chat:5443/orinayo/api",N={chat:{mutes:{}}},S="",$="",U="",F="",K=function(e,t,n,r,o,c){},I=function(e){},B=function(e){},z=null,L=!1;function W(e,t,n,r,o,c,l,d){N=e,U=t,F=btoa(JSON.stringify({room:U,id:r,name:n})),K=o,I=c,B=d,$=n,S=r,window.addEventListener("beforeunload",function(){H()}),window.addEventListener("unload",function(){H()}),L=!0,function(){Y.apply(this,arguments)}()}function H(){z&&z.close();var e,t=P(Object.getOwnPropertyNames(D));try{for(t.s();!(e=t.n()).done;){var n=e.value;D[n].pc.close()}}catch(e){t.e(e)}finally{t.f()}L=!1,console.debug("stop: "+L)}function J(e){if(!e)return!0;var t=e.frequencyBinCount,n=new Float32Array(t);e.getFloatFrequencyData(n);for(var r=!0,i=0;i<t;i++)if(n[i]>-100){r=!1;break}return r}function V(){return G.apply(this,arguments)}function G(){return(G=Object(C.a)(regeneratorRuntime.mark(function e(){var t,n,r,o,c,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=E+"/status",e.next=1,fetch(t);case 1:return n=e.sent,e.next=2,n.json();case 2:r=e.sent,o=P(r),e.prev=3,l=regeneratorRuntime.mark(function e(){var t,n,r,o,l,d,f,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.value,n=JSON.parse(atob(t.streamKey)),U==n.room){e.next=1;break}return e.abrupt("return",0);case 1:if(F!=t.streamKey){e.next=2;break}return e.abrupt("return",0);case 2:if(r=D[t.streamKey],!(o=r&&J(r.analyser)&&!N.chat.mutes.hasOwnProperty(n.id))){e.next=3;break}return console.debug("stale check",o),I(n.id),r.pc.close(),delete D[t.streamKey],e.abrupt("return",0);case 3:if(!r){e.next=4;break}return e.abrupt("return",0);case 4:return D[t.streamKey]={pc:new RTCPeerConnection,key:n,id:t.streamKey},D[t.streamKey].pc.ontrack=function(e){var n=D[t.streamKey].key,o=D[t.streamKey].pc;e.track.onmute=function(e){I&&(console.log("onmute",n,e),I(n.id),r.pc.close(),delete D[t.streamKey])},console.debug("ontrack",e,n,o);var c=e.streams[0],l=T.createAnalyser();l.fftSize=256,l.minDecibels=-80,l.maxDecibels=-10,l.smoothingTimeConstant=.85,T.createMediaStreamSource(c).connect(l),D[t.streamKey].analyser=l,K&&K(o,c,l,n.id,n.id,n.name)},D[t.streamKey].pc.addTransceiver("audio",{direction:"recvonly"}),e.next=5,D[t.streamKey].pc.createOffer();case 5:return l=e.sent,e.next=6,D[t.streamKey].pc.setLocalDescription(l);case 6:return d=E+"/whep",e.next=7,fetch(d,{method:"POST",body:l.sdp,headers:{Authorization:"Bearer ".concat(t.streamKey),"Content-Type":"application/sdp"}});case 7:return f=e.sent,e.next=8,f.text();case 8:return h=e.sent,e.next=9,D[t.streamKey].pc.setRemoteDescription({sdp:h,type:"answer"});case 9:case"end":return e.stop()}},e)}),o.s();case 4:if((c=o.n()).done){e.next=7;break}return e.delegateYield(l(),"t0",5);case 5:if(0!==e.t0){e.next=6;break}return e.abrupt("continue",6);case 6:e.next=4;break;case 7:e.next=9;break;case 8:e.prev=8,d=e.catch(3),o.e(d);case 9:return e.prev=9,o.f(),e.finish(9);case 10:setTimeout(function(){V()},3e3);case 11:case"end":return e.stop()}},e,null,[[3,8,9,10]])}))).apply(this,arguments)}function Y(){return(Y=Object(C.a)(regeneratorRuntime.mark(function e(){var t,n,source,r,o,c,l,d,f,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=1;break}return e.abrupt("return");case 1:return e.prev=1,document.querySelectorAll(".peer").forEach(function(e){return e.remove()}),z=new RTCPeerConnection,e.prev=2,e.next=3,navigator.mediaDevices.getUserMedia(A);case 3:t=e.sent,e.next=5;break;case 4:return e.prev=4,f=e.catch(2),console.error(f),B&&B(f),e.abrupt("return");case 5:return(n=T.createAnalyser()).fftSize=256,n.minDecibels=-80,n.maxDecibels=-10,n.smoothingTimeConstant=.85,source=T.createMediaStreamSource(t),(r=T.createGain()).gain.value=.01,source.connect(n),n.connect(r),r.connect(T.destination),K&&K(z,t,n,"me",S,$),T.resume(),t.getTracks().forEach(function(track){"audio"===track.kind&&z.addTransceiver(track,{direction:"sendonly"})}),e.next=6,z.createOffer();case 6:return o=e.sent,z.setLocalDescription(o),c=E+"/whip",e.next=7,fetch(c,{method:"POST",body:o.sdp,headers:{Authorization:"Bearer ".concat(F),"Content-Type":"application/sdp"}});case 7:return l=e.sent,e.next=8,l.text();case 8:d=e.sent,z.setRemoteDescription({sdp:d,type:"answer"}),V(),e.next=10;break;case 9:e.prev=9,h=e.catch(1),B&&B(h);case 10:case"end":return e.stop()}},e,null,[[1,9],[2,4]])}))).apply(this,arguments)}var Q=n(222),X={onCopy:function(e){e.$toast({message:e.$t("common.copy_succ_hint"),color:"info"})},onError:function(e){}};function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Z=function(){return!!e})()}var ee=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(w.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},te=function(e){function t(){return Object(m.a)(this,t),e=this,n=t,r=arguments,n=Object(k.a)(n),Object(y.a)(e,Z()?Reflect.construct(n,r||[],Object(k.a)(e).constructor):n.apply(e,r));var e,n,r}return Object(O.a)(t,e),Object(v.a)(t,[{key:"mounted",value:function(){var e=this;setTimeout(function(){"me"!==e.user.trackId&&(e.$refs.audio.srcObject=e.user.stream);e.visualize(e.user.uid,e.user.analyser)},200)}},{key:"editName",value:function(){this.$emit("edit-name",this.user)}},{key:"handleMutable",value:function(){this.user.isMuted?this.$emit("unmute",this.user):this.$emit("mute",this.user)}},{key:"visualize",value:function(e,t){var canvas=this.$refs.canvas;canvas.width=canvas.width*window.devicePixelRatio,canvas.height=canvas.height*window.devicePixelRatio;var n=canvas.getContext("2d"),r=t.frequencyBinCount,o=new Float32Array(r),c=Object(Q.a)(e),g=c[0],b=c[1];!function e(){var c=canvas.width,l=canvas.height;t.getFloatFrequencyData(o),n.fillStyle="rgb(0, 0, 0)",n.fillRect(0,0,c,l);for(var d=c/r*3,f=0,h=0,i=0;i<r;i++){f=2*(o[i]+140);var m=Math.floor(f+64);n.fillStyle=g%3==0?"rgb(".concat(m,",").concat(g,",").concat(b,")"):g%3==1?"rgb(".concat(g,",").concat(m,",").concat(b,")"):"rgb(".concat(g,",").concat(b,",").concat(m,")"),(f=l/7+f/256*l*6/7)<l/7&&(f=l/7),n.fillRect(h,l-f,d,f),h+=d+2}setTimeout(function(){requestAnimationFrame(e)},50)}()}}])}(_.d);ee([Object(_.c)()],te.prototype,"user",void 0),ee([Object(_.c)()],te.prototype,"muted",void 0);var ne=te=ee([_.a],te),re=(n(585),n(57)),ae=Object(re.a)(ne,function(){var e=this,t=e._self._c;e._self._setupProxy;return e.user?t("div",{staticClass:"user-card"},[t("div",{staticClass:"top d-flex py-2 pl-4 pr-2"},[t("div",{staticClass:"nickname font-weight-bold",on:{click:e.editName}},[e._v("\n      "+e._s(e.user.nickname)+"\n    ")]),e._v(" "),t(r.a,{attrs:{icon:"",small:""},on:{click:e.handleMutable}},[t(f.a,{attrs:{color:this.user.isMuted?"rgb(242, 72, 34)":"#FFFFFF"}},[e._v("\n        "+e._s(this.user.isMuted?e.$icons.mdiMicrophoneOff:e.$icons.mdiMicrophone)+"\n      ")])],1)],1),e._v(" "),t("div",{staticClass:"canvas-wrapper"},[t("canvas",{ref:"canvas",staticClass:"canvas"})]),e._v(" "),t("audio",{ref:"audio",attrs:{autoplay:""}})]):e._e()},[],!1,null,"22a8cfb5",null).exports;function ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ie=function(){return!!e})()}var oe=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(w.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},ce={dictionaries:[j.a,j.c],separator:" ",length:2},se=function(e){function t(){var e,n,r,o;return Object(m.a)(this,t),n=this,r=t,o=arguments,r=Object(k.a)(r),(e=Object(y.a)(n,ie()?Reflect.construct(r,o||[],Object(k.a)(n).constructor):r.apply(n,o))).loading=!1,e.showNameDialog=!1,e.noMicPermission=!1,e.nickname="",e.roomName="",e.uid="",e.participantMap={},e.participantTrackIdMap={},e.participants=[],e.streams={},e.pc=null,e.copyUtil=X,e}return Object(O.a)(t,e),Object(v.a)(t,[{key:"isAllMuted",get:function(){for(var e=0;e<this.participants.length;e++)if(!this.participants[e].isMuted)return!1;return!0}},{key:"isWeChat",get:function(){return navigator.userAgent.toLowerCase().includes("micromessenger")}},{key:"destination",get:function(){return window.location.href}},{key:"validated",get:function(){return 0!==this.nickname.trim().length}},{key:"cardWidth",get:function(){var e=window.innerWidth;if(e<460){var t=Math.round((e-24-40)/2);return"".concat(t,"px")}return"200px"}},{key:"isEmpty",get:function(){return 1===this.participants.length}},{key:"title",get:function(){return"#".concat(this.roomName)}},{key:"genRandomChannelName",value:function(){var e=Object(j.d)(ce);this.nickname=e.slice(0,1).toUpperCase()+e.slice(1)}},{key:"mounted",value:function(){var e=this;setTimeout(function(){e.reload(),e.nickname&&W(e,e.roomName,e.nickname,e.uid,e.onConnect,e.onDisconnect,e.onResume,e.onError)},100)}},{key:"reload",value:function(){this.loading=!0;var e=this.$route.params.name;this.chat.rooms.hasOwnProperty(e)?this.nickname=this.chat.rooms[e].nickname:this.showNameDialog=!0,this.uid=this.profile.uid||Object(Q.b)(),this.setProfile({uid:this.uid}),this.roomName=e,this.setAppbar({color:"rgba(0, 0, 0, 0.0)",home:!0,back:!1,title:"#".concat(this.roomName)}),this.loading=!1}},{key:"join",value:function(){this.setNickname({room:this.roomName,nickname:this.nickname}),this.showNameDialog=!1,0===this.participants.length?W(this,this.roomName,this.nickname,this.uid,this.onConnect,this.onDisconnect,this.onResume,this.onError):window.location.reload()}},{key:"onConnect",value:function(e,t,n,r,o,c){this.pc=e,console.log(t,o,c),this.addParticipant(t,n,r,o,c),this.streams[o]=t,this.chat.mutes.hasOwnProperty(o)&&this.muteOrUnmute(o,!0)}},{key:"onDisconnect",value:function(e){var t=this.removeParticipant(e);null!==t&&delete this.streams[t.uid]}},{key:"onError",value:function(e){e&&"NotAllowedError"===e.name?(console.log("no permission"),this.noMicPermission=!0):console.log(e)}},{key:"onResume",value:function(e){var t=this;return new Promise(function(n){console.log("resume from connection",e),t.clearup(),n()})}},{key:"clearup",value:function(){console.log("clear up"),this.participants.splice(0,this.participants.length),this.participantTrackIdMap={},this.participantMap={},this.streams={}}},{key:"goHome",value:function(){H(),this.clearup()}},{key:"test",value:function(){console.log(this.participantTrackIdMap),console.log(this.participantMap),console.log(this.participants)}},{key:"findParticipant",value:function(e){for(var t=0;t<this.participants.length;t++)if(this.participants[t].uid===e)return{user:this.participants[t],index:t};return null}},{key:"addParticipant",value:function(e,t,n,r,o){var c={stream:e,analyser:t,trackId:n,isMuted:!1,uid:r,nickname:o};this.participantMap.hasOwnProperty(r)||this.participants.push(c),console.log("addParticipant",r,o,n),this.participantMap[r]=c,this.participantTrackIdMap[n]=c}},{key:"removeParticipant",value:function(e){if(!this.participantTrackIdMap.hasOwnProperty(e))return null;var t=this.participantTrackIdMap[e];if(t){var n=this.findParticipant(t.uid);n&&n.user&&(console.log("removeParticipant",t,e),this.participants.splice(n.index,1),delete this.participantMap[t.uid])}return delete this.participantTrackIdMap[e],t}},{key:"editName",value:function(e){e&&this.uid===e.uid&&(this.nickname=e.nickname,this.showNameDialog=!0)}},{key:"muteAll",value:function(){for(var e=this.participants.map(function(e){return e.uid}),t=this.isAllMuted,n=0;n<e.length;n++)this.muteOrUnmute(e[n],!t);t?this.removeMutes(e):this.addMutes(e)}},{key:"muteUser",value:function(e){this.muteOrUnmute(e.uid,!0),this.addMute(e.uid)}},{key:"unmuteUser",value:function(e){this.muteOrUnmute(e.uid,!1),this.removeMute(e.uid)}},{key:"muteOrUnmute",value:function(e,t){if(this.participantMap.hasOwnProperty(e)){console.log("uid=".concat(e,", mute=").concat(t));var n=this.findParticipant(e);n&&n.user&&(n.user.isMuted=t,this.participants.splice(n.index,1,n.user),this.setStream(e,!t))}}},{key:"setStream",value:function(e,t){var n=this.streams[e];n&&n.getTracks().length>0&&(n.getTracks()[0].enabled=t)}}])}(Object(_.b)(M.a));oe([Object(x.b)(function(e){return e.app.profile})],se.prototype,"profile",void 0),oe([Object(x.b)(function(e){return e.app.chat})],se.prototype,"chat",void 0),oe([Object(x.a)("app/SET_NICKNAME")],se.prototype,"setNickname",void 0),oe([Object(x.a)("app/SET_PROFILE")],se.prototype,"setProfile",void 0),oe([Object(x.a)("app/SET_APPBAR")],se.prototype,"setAppbar",void 0),oe([Object(x.a)("app/ADD_MUTE")],se.prototype,"addMute",void 0),oe([Object(x.a)("app/REMOVE_MUTE")],se.prototype,"removeMute",void 0),oe([Object(x.a)("app/ADD_MUTES")],se.prototype,"addMutes",void 0),oe([Object(x.a)("app/REMOVE_MUTES")],se.prototype,"removeMutes",void 0);var ue=se=oe([Object(_.a)({head:function(){return{title:this.title,meta:[{hid:"theme-color",name:"theme-color",content:"#040C11"}]}},components:{UserCard:ae}})],se),le=(n(587),Object(re.a)(ue,function(){var e=this,t=this,n=t._self._c;t._self._setupProxy;return n("normal-page-layout",{on:{home:t.goHome}},[n(l.a,{staticClass:"room-page"},[n("f-loading",{attrs:{loading:t.loading,fullscreen:!0}}),t._v(" "),[t.isEmpty?n("div",{staticClass:"hint-box empty-hint px-4 py-2 mx-2 mb-4"},[n("h2",{staticClass:"body-1 font-weight-bold"},[t._v(t._s(t.$t("room.empty_block_title")))]),t._v(" "),n("div",{staticClass:"body-2"},[t._v("\n          "+t._s(t.$t("room.empty_block_text"))+"\n        ")]),t._v(" "),n(r.a,{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.destination,expression:"destination",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:function(){return t.copyUtil.onCopy(e)},expression:"() => copyUtil.onCopy(this)",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:function(){return t.copyUtil.onError(e)},expression:"() => copyUtil.onError(this)",arg:"error"}],staticClass:"my-2",attrs:{small:"",outlined:""}},[t._v("\n          "+t._s(t.$t("common.copy_url"))+"\n        ")])],1):n("div",{staticClass:"hint-box caption px-4 py-2 mx-2 mb-4"},[n(f.a,{attrs:{small:""}},[t._v(t._s(t.$icons.mdiHeadphones))]),t._v("\n        "+t._s(t.$t("room.earhub_block_text"))+"\n      ")],1),t._v(" "),t.noMicPermission?n("div",{staticClass:"hint-box error-hint px-4 py-2 mx-2 mb-4"},[n("h2",{staticClass:"body-1 font-weight-bold"},[t._v(t._s(t.$t("room.error_block_title")))]),t._v(" "),n("div",{staticClass:"body-2"},[t._v("\n          "+t._s(t.$t("room.error_block_text"))+"\n        ")])]):t._e(),t._v(" "),t.isWeChat?n("div",{staticClass:"hint-box error-hint px-4 py-2 mx-2 mb-4"},[n("h2",{staticClass:"body-1 font-weight-bold"},[t._v(t._s(t.$t("room.wechat_error_block_title")))]),t._v(" "),n("div",{staticClass:"body-2"},[t._v("\n          "+t._s(t.$t("room.wechat_error_block_text"))+"\n        ")])]):t._e(),t._v(" "),n("div",{staticClass:"cards"},t._l(t.participants,function(e){return n("div",{key:e.uid,staticClass:"user-card-wrapper ma-2",style:{width:t.cardWidth}},[n("user-card",{attrs:{user:e},on:{mute:t.muteUser,unmute:t.unmuteUser,"edit-name":t.editName}})],1)}),0)]],2),t._v(" "),n(d.a,{attrs:{"max-width":"290"},model:{value:t.showNameDialog,callback:function(e){t.showNameDialog=e},expression:"showNameDialog"}},[n(o.a,[n(c.c,{staticClass:"title-2"},[t._v(t._s(t.$t("room.name_dialog_title")))]),t._v(" "),n(c.b,{staticClass:"mb-0"},[n("div",{staticClass:"mb-4"},[n(h.a,{attrs:{label:t.$t("room.name_dialog_placeholder"),"hide-details":!0},scopedSlots:t._u([{key:"append",fn:function(){return[n(r.a,{attrs:{icon:""},on:{click:t.genRandomChannelName}},[n(f.a,[t._v("\n                  "+t._s(t.$icons.mdiDice3)+"\n                ")])],1)]},proxy:!0}]),model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1)]),t._v(" "),n(c.a,{staticClass:"px-5 pb-5"},[n(r.a,{attrs:{color:"primary",block:"",rounded:"",disabled:!t.validated},on:{click:t.join}},[t._v("\n          "+t._s(t.$t("room.name_dialog_btn"))+"\n        ")])],1)],1)],1),t._v(" "),n(r.a,{staticClass:"mute-all-btn",attrs:{color:"rgba(255, 255, 255, 0.2)",dark:"",small:"",absolute:"",bottom:"",right:"",fab:""},on:{click:t.muteAll}},[n(f.a,{attrs:{color:this.isAllMuted?"rgb(242, 72, 34)":"#FFFFFF"}},[t._v("\n      "+t._s(this.isAllMuted?t.$icons.mdiMicrophoneOff:t.$icons.mdiMicrophone)+"\n    ")])],1)],1)},[],!1,null,"016ce605",null));t.default=le.exports}}]);