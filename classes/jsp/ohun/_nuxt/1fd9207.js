(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{510:function(t,e,n){"use strict";var r=n(2),o=n(22),c=n(23),l=n(30),d=n(17),f=n(35),h=n(5),m=(n(10),n(15),n(41),n(13),n(19),n(14),n(4),n(68),n(16),n(62),n(59),n(1)),v=n(44),y=n(73),k=n(239);function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(w=function(){return!!t})()}var _=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},x=function(t){function e(){return Object(o.a)(this,e),t=this,n=e,r=arguments,n=Object(d.a)(n),Object(l.a)(t,w()?Reflect.construct(n,r||[],Object(d.a)(t).constructor):n.apply(t,r));var t,n,r}return Object(f.a)(e,t),Object(c.a)(e,[{key:"title",get:function(){return""}},{key:"description",get:function(){return""}},{key:"appbar",get:function(){return{}}},{key:"resetAppbar",value:function(){this.setAppbar({title:"",style:"",show:!0,back:!0,home:!1,dark:!0,color:"#111"})}},{key:"setLang",value:function(){var t="en",e=navigator.language;e.includes("zh")?t=e.includes("zh-TW")||e.includes("zh-HK")?"zhTW":"zh":e.includes("es")?t="es":e.includes("ja")?t="ja":e.includes("de")&&(t="de"),this.$i18n.locale=t,document.title=this.title}},{key:"setPage",value:function(){this.setAppbar(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach(function(e){Object(r.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({title:this.title},this.appbar)),setTimeout(function(){Object(k.b)()},50)}},{key:"beforeDestroy",value:function(){this.resetAppbar()}}])}(m.a);_([Object(y.a)("app/SET_APPBAR")],x.prototype,"setAppbar",void 0),x=_([Object(v.a)({head:function(){return{title:this.title,meta:[{hid:"theme-color",name:"theme-color",content:"#040C11"}]}},beforeRouteEnter:function(t,e,n){n(function(t){t.setLang(),t.setPage()})}})],x),e.a=x},548:function(t,e,n){var content=n(586);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("015d88a7",content,!0,{sourceMap:!1})},549:function(t,e,n){var content=n(588);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("411f58bc",content,!0,{sourceMap:!1})},585:function(t,e,n){"use strict";n(548)},586:function(t,e,n){var r=n(20)(function(i){return i[1]});r.push([t.i,".user-card[data-v-22a8cfb5]{background:rgba(0,0,0,.3);border-radius:20px;box-shadow:0 0 20px rgba(0,0,0,.3);overflow:hidden;position:relative;width:100%}.user-card .top[data-v-22a8cfb5]{justify-content:space-between;left:0;position:absolute;right:0;top:0}.user-card .top .nickname[data-v-22a8cfb5]{word-break:break-all}.user-card .canvas-wrapper[data-v-22a8cfb5]{height:100px}.user-card .canvas-wrapper .canvas[data-v-22a8cfb5]{border-radius:20px;height:100%;width:100%}",""]),r.locals={},t.exports=r},587:function(t,e,n){"use strict";n(549)},588:function(t,e,n){var r=n(20)(function(i){return i[1]});r.push([t.i,".mute-all-btn[data-v-7612d705]{bottom:0;box-shadow:0 0 20px hsla(0,0%,100%,.08);margin:0 16px 68px 0;position:absolute}.cards[data-v-7612d705]{display:flex;flex-direction:row;flex-wrap:wrap}.hint-box[data-v-7612d705]{background:linear-gradient(-15deg,hsla(0,0%,100%,.12),hsla(0,0%,100%,.1));border-radius:20px;color:hsla(0,0%,100%,.7)}.hint-box.empty-hint[data-v-7612d705]{background:linear-gradient(-15deg,#90f,#0057fa)!important}.hint-box.error-hint[data-v-7612d705]{background:linear-gradient(-15deg,#ec5700,#be1d00)!important}",""]),r.locals={},t.exports=r},592:function(t,e,n){"use strict";n.r(e);var r=n(504),o=n(227),c=n(186),l=n(590),d=n(506),f=n(225),h=n(593),m=(n(85),n(22)),v=n(23),y=n(30),k=n(17),O=n(35),w=n(5),_=(n(33),n(41),n(61),n(45),n(158),n(36),n(13),n(4),n(68),n(62),n(82),n(59),n(44)),x=n(73),j=n(514),M=n(510),C=(n(10),n(51),n(53),n(48),n(25),n(42),n(24));n(84),n(516),n(518),n(519),n(574),n(14),n(46),n(520),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(16),n(47);function P(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,a){if(t){if("string"==typeof t)return R(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?R(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw c}}}}function R(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=Array(a);e<a;e++)n[e]=t[e];return n}var A={audio:!0,video:!1},T=new(window.AudioContext||window.webkitAudioContext),D={},E="",N="",S="",$="",U=function(t,e,n,r,o,c){},K=function(t){},F=function(t){},I=null,B=!1;function z(t,e,n,r,o,c,l){S=t,$=btoa(JSON.stringify({room:S,id:n,name:e})),U=r,K=o,F=l,N=e,E=n,window.addEventListener("beforeunload",function(){L()}),window.addEventListener("unload",function(){L()}),B=!0,function(){V.apply(this,arguments)}()}function L(){I&&I.close();var t,e=P(Object.getOwnPropertyNames(D));try{for(e.s();!(t=e.n()).done;){var n=t.value;D[n].pc.close()}}catch(t){e.e(t)}finally{e.f()}B=!1,console.debug("stop: "+B)}function W(t){if(!t)return!0;var e=t.frequencyBinCount,n=new Float32Array(e);t.getFloatFrequencyData(n);for(var r=!0,i=0;i<e;i++)if(n[i]>-100){r=!1;break}return r}function H(){return J.apply(this,arguments)}function J(){return(J=Object(C.a)(regeneratorRuntime.mark(function t(){var e,n,r,o,c,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,fetch("/orinayo/api/status");case 1:return e=t.sent,t.next=2,e.json();case 2:n=t.sent,r=P(n),t.prev=3,c=regeneratorRuntime.mark(function t(){var e,n,r,c,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.value,n=JSON.parse(atob(e.streamKey)),S==n.room){t.next=1;break}return t.abrupt("return",0);case 1:if($!=e.streamKey){t.next=2;break}return t.abrupt("return",0);case 2:if(!D[e.streamKey]||!W(D[e.streamKey].analyser)){t.next=3;break}if(console.debug("stale",D[e.streamKey]),!K){t.next=3;break}return K(n.id),D[e.streamKey].pc.close(),delete D[e.streamKey],t.abrupt("return",0);case 3:if(!D[e.streamKey]){t.next=4;break}return t.abrupt("return",0);case 4:return D[e.streamKey]={pc:new RTCPeerConnection,key:n,id:e.streamKey},D[e.streamKey].pc.ontrack=function(t){var n=D[e.streamKey].key,r=D[e.streamKey].pc;console.debug("ontrack",t,n,r);var o,c=P(t.streams);try{for(c.s();!(o=c.n()).done;){var l=o.value;if(l){var d=T.createAnalyser();d.fftSize=256,d.minDecibels=-80,d.maxDecibels=-10,d.smoothingTimeConstant=.85,T.createMediaStreamSource(l).connect(d),U&&(U(r,l,d,n.id,n.id,n.name),D[e.streamKey].analyser=d)}}}catch(t){c.e(t)}finally{c.f()}},D[e.streamKey].pc.addTransceiver("audio",{direction:"recvonly"}),t.next=5,D[e.streamKey].pc.createOffer();case 5:return r=t.sent,t.next=6,D[e.streamKey].pc.setLocalDescription(r);case 6:return t.next=7,fetch("/orinayo/api/whep",{method:"POST",body:r.sdp,headers:{Authorization:"Bearer ".concat(e.streamKey),"Content-Type":"application/sdp"}});case 7:return c=t.sent,t.next=8,c.text();case 8:return l=t.sent,t.next=9,D[e.streamKey].pc.setRemoteDescription({sdp:l,type:"answer"});case 9:case"end":return t.stop()}},t)}),r.s();case 4:if((o=r.n()).done){t.next=7;break}return t.delegateYield(c(),"t0",5);case 5:if(0!==t.t0){t.next=6;break}return t.abrupt("continue",6);case 6:t.next=4;break;case 7:t.next=9;break;case 8:t.prev=8,l=t.catch(3),r.e(l);case 9:return t.prev=9,r.f(),t.finish(9);case 10:setTimeout(function(){H()},5e3);case 11:case"end":return t.stop()}},t,null,[[3,8,9,10]])}))).apply(this,arguments)}function V(){return(V=Object(C.a)(regeneratorRuntime.mark(function t(){var e,n,source,r,o,c,l,d,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(B){t.next=1;break}return t.abrupt("return");case 1:return t.prev=1,document.querySelectorAll(".peer").forEach(function(t){return t.remove()}),I=new RTCPeerConnection,t.prev=2,t.next=3,navigator.mediaDevices.getUserMedia(A);case 3:e=t.sent,t.next=5;break;case 4:return t.prev=4,d=t.catch(2),console.error(d),F&&F(d),t.abrupt("return");case 5:return(n=T.createAnalyser()).fftSize=256,n.minDecibels=-80,n.maxDecibels=-10,n.smoothingTimeConstant=.85,source=T.createMediaStreamSource(e),(r=T.createGain()).gain.value=.01,source.connect(n),n.connect(r),r.connect(T.destination),U&&U(I,e,n,"me",E,N),T.resume(),e.getTracks().forEach(function(track){"audio"===track.kind&&I.addTransceiver(track,{direction:"sendonly"})}),t.next=6,I.createOffer();case 6:return o=t.sent,I.setLocalDescription(o),t.next=7,fetch("/orinayo/api/whip",{method:"POST",body:o.sdp,headers:{Authorization:"Bearer ".concat($),"Content-Type":"application/sdp"}});case 7:return c=t.sent,t.next=8,c.text();case 8:l=t.sent,I.setRemoteDescription({sdp:l,type:"answer"}),H(),t.next=10;break;case 9:t.prev=9,f=t.catch(1),F&&F(f);case 10:case"end":return t.stop()}},t,null,[[1,9],[2,4]])}))).apply(this,arguments)}var G=n(222),Y={onCopy:function(t){t.$toast({message:t.$t("common.copy_succ_hint"),color:"info"})},onError:function(t){}};function Q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Q=function(){return!!t})()}var X=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(w.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},Z=function(t){function e(){return Object(m.a)(this,e),t=this,n=e,r=arguments,n=Object(k.a)(n),Object(y.a)(t,Q()?Reflect.construct(n,r||[],Object(k.a)(t).constructor):n.apply(t,r));var t,n,r}return Object(O.a)(e,t),Object(v.a)(e,[{key:"mounted",value:function(){var t=this;setTimeout(function(){"me"!==t.user.trackId&&(t.$refs.audio.srcObject=t.user.stream);t.visualize(t.user.uid,t.user.analyser)},200)}},{key:"editName",value:function(){this.$emit("edit-name",this.user)}},{key:"handleMutable",value:function(){this.user.isMuted?this.$emit("unmute",this.user):this.$emit("mute",this.user)}},{key:"visualize",value:function(t,e){var canvas=this.$refs.canvas;canvas.width=canvas.width*window.devicePixelRatio,canvas.height=canvas.height*window.devicePixelRatio;var n=canvas.getContext("2d"),r=e.frequencyBinCount,o=new Float32Array(r),c=Object(G.a)(t),g=c[0],b=c[1];!function t(){var c=canvas.width,l=canvas.height;e.getFloatFrequencyData(o),n.fillStyle="rgb(0, 0, 0)",n.fillRect(0,0,c,l);for(var d=c/r*3,f=0,h=0,i=0;i<r;i++){f=2*(o[i]+140);var m=Math.floor(f+64);n.fillStyle=g%3==0?"rgb(".concat(m,",").concat(g,",").concat(b,")"):g%3==1?"rgb(".concat(g,",").concat(m,",").concat(b,")"):"rgb(".concat(g,",").concat(b,",").concat(m,")"),(f=l/7+f/256*l*6/7)<l/7&&(f=l/7),n.fillRect(h,l-f,d,f),h+=d+2}setTimeout(function(){requestAnimationFrame(t)},50)}()}}])}(_.d);X([Object(_.c)()],Z.prototype,"user",void 0),X([Object(_.c)()],Z.prototype,"muted",void 0);var tt=Z=X([_.a],Z),et=(n(585),n(57)),nt=Object(et.a)(tt,function(){var t=this,e=t._self._c;t._self._setupProxy;return t.user?e("div",{staticClass:"user-card"},[e("div",{staticClass:"top d-flex py-2 pl-4 pr-2"},[e("div",{staticClass:"nickname font-weight-bold",on:{click:t.editName}},[t._v("\n      "+t._s(t.user.nickname)+"\n    ")]),t._v(" "),e(r.a,{attrs:{icon:"",small:""},on:{click:t.handleMutable}},[e(f.a,{attrs:{color:this.user.isMuted?"rgb(242, 72, 34)":"#FFFFFF"}},[t._v("\n        "+t._s(this.user.isMuted?t.$icons.mdiMicrophoneOff:t.$icons.mdiMicrophone)+"\n      ")])],1)],1),t._v(" "),e("div",{staticClass:"canvas-wrapper"},[e("canvas",{ref:"canvas",staticClass:"canvas"})]),t._v(" "),e("audio",{ref:"audio",attrs:{autoplay:""}})]):t._e()},[],!1,null,"22a8cfb5",null).exports;function at(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(at=function(){return!!t})()}var it=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(w.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},ot={dictionaries:[j.a,j.c],separator:" ",length:2},ct=function(t){function e(){var t,n,r,o;return Object(m.a)(this,e),n=this,r=e,o=arguments,r=Object(k.a)(r),(t=Object(y.a)(n,at()?Reflect.construct(r,o||[],Object(k.a)(n).constructor):r.apply(n,o))).loading=!1,t.showNameDialog=!1,t.noMicPermission=!1,t.nickname="",t.roomName="",t.uid="",t.participantMap={},t.participantTrackIdMap={},t.participants=[],t.streams={},t.pc=null,t.copyUtil=Y,t}return Object(O.a)(e,t),Object(v.a)(e,[{key:"isAllMuted",get:function(){for(var t=0;t<this.participants.length;t++)if(!this.participants[t].isMuted)return!1;return!0}},{key:"isWeChat",get:function(){return navigator.userAgent.toLowerCase().includes("micromessenger")}},{key:"destination",get:function(){return window.location.href}},{key:"validated",get:function(){return 0!==this.nickname.trim().length}},{key:"cardWidth",get:function(){var t=window.innerWidth;if(t<460){var e=Math.round((t-24-40)/2);return"".concat(e,"px")}return"200px"}},{key:"isEmpty",get:function(){return 1===this.participants.length}},{key:"title",get:function(){return"#".concat(this.roomName)}},{key:"genRandomChannelName",value:function(){var t=Object(j.d)(ot);this.nickname=t.slice(0,1).toUpperCase()+t.slice(1)}},{key:"mounted",value:function(){var t=this;setTimeout(function(){t.reload(),t.nickname&&z(t.roomName,t.nickname,t.uid,t.onConnect,t.onDisconnect,t.onResume,t.onError)},100)}},{key:"reload",value:function(){this.loading=!0;var t=this.$route.params.name;this.chat.rooms.hasOwnProperty(t)?this.nickname=this.chat.rooms[t].nickname:this.showNameDialog=!0,this.uid=this.profile.uid||Object(G.b)(),this.setProfile({uid:this.uid}),this.roomName=t,this.setAppbar({color:"rgba(0, 0, 0, 0.0)",home:!0,back:!1,title:"#".concat(this.roomName)}),this.loading=!1}},{key:"join",value:function(){this.setNickname({room:this.roomName,nickname:this.nickname}),this.showNameDialog=!1,0===this.participants.length?z(this.roomName,this.nickname,this.uid,this.onConnect,this.onDisconnect,this.onResume,this.onError):window.location.reload()}},{key:"onConnect",value:function(t,e,n,r,o,c){this.pc=t,console.log(e,o,c),this.addParticipant(e,n,r,o,c),this.streams[o]=e,this.chat.mutes.hasOwnProperty(o)&&this.muteOrUnmute(o,!0)}},{key:"onDisconnect",value:function(t){var e=this.removeParticipant(t);null!==e&&delete this.streams[e.uid]}},{key:"onError",value:function(t){t&&"NotAllowedError"===t.name?(console.log("no permission"),this.noMicPermission=!0):console.log(t)}},{key:"onResume",value:function(t){var e=this;return new Promise(function(n){console.log("resume from connection",t),e.clearup(),n()})}},{key:"clearup",value:function(){console.log("clear up"),this.participants.splice(0,this.participants.length),this.participantTrackIdMap={},this.participantMap={},this.streams={}}},{key:"goHome",value:function(){L(),this.clearup()}},{key:"test",value:function(){console.log(this.participantTrackIdMap),console.log(this.participantMap),console.log(this.participants)}},{key:"findParticipant",value:function(t){for(var e=0;e<this.participants.length;e++)if(this.participants[e].uid===t)return{user:this.participants[e],index:e};return null}},{key:"addParticipant",value:function(t,e,n,r,o){var c={stream:t,analyser:e,trackId:n,isMuted:!1,uid:r,nickname:o};this.participantMap.hasOwnProperty(r)||this.participants.push(c),console.log("addParticipant",r,o,n),this.participantMap[r]=c,this.participantTrackIdMap[n]=c}},{key:"removeParticipant",value:function(t){if(!this.participantTrackIdMap.hasOwnProperty(t))return null;var e=this.participantTrackIdMap[t];if(e){var n=this.findParticipant(e.uid);n&&n.user&&(console.log("removeParticipant",e,t),this.participants.splice(n.index,1),delete this.participantMap[e.uid])}return delete this.participantTrackIdMap[t],e}},{key:"editName",value:function(t){t&&this.uid===t.uid&&(this.nickname=t.nickname,this.showNameDialog=!0)}},{key:"muteAll",value:function(){for(var t=this.participants.map(function(t){return t.uid}),e=this.isAllMuted,n=0;n<t.length;n++)this.muteOrUnmute(t[n],!e);e?this.removeMutes(t):this.addMutes(t)}},{key:"muteUser",value:function(t){this.muteOrUnmute(t.uid,!0),this.addMute(t.uid)}},{key:"unmuteUser",value:function(t){this.muteOrUnmute(t.uid,!1),this.removeMute(t.uid)}},{key:"muteOrUnmute",value:function(t,e){if(this.participantMap.hasOwnProperty(t)){console.log("uid=".concat(t,", mute=").concat(e));var n=this.findParticipant(t);n&&n.user&&(n.user.isMuted=e,this.participants.splice(n.index,1,n.user),this.setStream(t,!e))}}},{key:"setStream",value:function(t,e){var n=this.streams[t];n&&n.getTracks().length>0&&(n.getTracks()[0].enabled=e)}}])}(Object(_.b)(M.a));it([Object(x.b)(function(t){return t.app.profile})],ct.prototype,"profile",void 0),it([Object(x.b)(function(t){return t.app.chat})],ct.prototype,"chat",void 0),it([Object(x.a)("app/SET_NICKNAME")],ct.prototype,"setNickname",void 0),it([Object(x.a)("app/SET_PROFILE")],ct.prototype,"setProfile",void 0),it([Object(x.a)("app/SET_APPBAR")],ct.prototype,"setAppbar",void 0),it([Object(x.a)("app/ADD_MUTE")],ct.prototype,"addMute",void 0),it([Object(x.a)("app/REMOVE_MUTE")],ct.prototype,"removeMute",void 0),it([Object(x.a)("app/ADD_MUTES")],ct.prototype,"addMutes",void 0),it([Object(x.a)("app/REMOVE_MUTES")],ct.prototype,"removeMutes",void 0);var st=ct=it([Object(_.a)({head:function(){return{title:this.title,meta:[{hid:"theme-color",name:"theme-color",content:"#040C11"}]}},components:{UserCard:nt}})],ct),ut=(n(587),Object(et.a)(st,function(){var t=this,e=this,n=e._self._c;e._self._setupProxy;return n("normal-page-layout",{on:{home:e.goHome}},[n(l.a,{staticClass:"room-page"},[n("f-loading",{attrs:{loading:e.loading,fullscreen:!0}}),e._v(" "),[e.isEmpty?n("div",{staticClass:"hint-box empty-hint px-4 py-2 mx-2 mb-4"},[n("h2",{staticClass:"body-1 font-weight-bold"},[e._v(e._s(e.$t("room.empty_block_title")))]),e._v(" "),n("div",{staticClass:"body-2"},[e._v("\n          "+e._s(e.$t("room.empty_block_text"))+"\n        ")]),e._v(" "),n(r.a,{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.destination,expression:"destination",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:function(){return e.copyUtil.onCopy(t)},expression:"() => copyUtil.onCopy(this)",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:function(){return e.copyUtil.onError(t)},expression:"() => copyUtil.onError(this)",arg:"error"}],staticClass:"my-2",attrs:{small:"",outlined:""}},[e._v("\n          "+e._s(e.$t("common.copy_url"))+"\n        ")])],1):n("div",{staticClass:"hint-box caption px-4 py-2 mx-2 mb-4"},[n(f.a,{attrs:{small:""}},[e._v(e._s(e.$icons.mdiHeadphones))]),e._v("\n        "+e._s(e.$t("room.earhub_block_text"))+"\n      ")],1),e._v(" "),e.noMicPermission?n("div",{staticClass:"hint-box error-hint px-4 py-2 mx-2 mb-4"},[n("h2",{staticClass:"body-1 font-weight-bold"},[e._v(e._s(e.$t("room.error_block_title")))]),e._v(" "),n("div",{staticClass:"body-2"},[e._v("\n          "+e._s(e.$t("room.error_block_text"))+"\n        ")])]):e._e(),e._v(" "),e.isWeChat?n("div",{staticClass:"hint-box error-hint px-4 py-2 mx-2 mb-4"},[n("h2",{staticClass:"body-1 font-weight-bold"},[e._v(e._s(e.$t("room.wechat_error_block_title")))]),e._v(" "),n("div",{staticClass:"body-2"},[e._v("\n          "+e._s(e.$t("room.wechat_error_block_text"))+"\n        ")])]):e._e(),e._v(" "),n("div",{staticClass:"cards"},e._l(e.participants,function(t){return n("div",{key:t.uid,staticClass:"user-card-wrapper ma-2",style:{width:e.cardWidth}},[n("user-card",{attrs:{user:t},on:{mute:e.muteUser,unmute:e.unmuteUser,"edit-name":e.editName}})],1)}),0)]],2),e._v(" "),n(d.a,{attrs:{"max-width":"290"},model:{value:e.showNameDialog,callback:function(t){e.showNameDialog=t},expression:"showNameDialog"}},[n(o.a,[n(c.c,{staticClass:"title-2"},[e._v(e._s(e.$t("room.name_dialog_title")))]),e._v(" "),n(c.b,{staticClass:"mb-0"},[n("div",{staticClass:"mb-4"},[n(h.a,{attrs:{label:e.$t("room.name_dialog_placeholder"),"hide-details":!0},scopedSlots:e._u([{key:"append",fn:function(){return[n(r.a,{attrs:{icon:""},on:{click:e.genRandomChannelName}},[n(f.a,[e._v("\n                  "+e._s(e.$icons.mdiDice3)+"\n                ")])],1)]},proxy:!0}]),model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)]),e._v(" "),n(c.a,{staticClass:"px-5 pb-5"},[n(r.a,{attrs:{color:"primary",block:"",rounded:"",disabled:!e.validated},on:{click:e.join}},[e._v("\n          "+e._s(e.$t("room.name_dialog_btn"))+"\n        ")])],1)],1)],1),e._v(" "),n(r.a,{staticClass:"mute-all-btn",attrs:{color:"rgba(255, 255, 255, 0.2)",dark:"",small:"",absolute:"",bottom:"",right:"",fab:""},on:{click:e.muteAll}},[n(f.a,{attrs:{color:this.isAllMuted?"rgb(242, 72, 34)":"#FFFFFF"}},[e._v("\n      "+e._s(this.isAllMuted?e.$icons.mdiMicrophoneOff:e.$icons.mdiMicrophone)+"\n    ")])],1)],1)},[],!1,null,"7612d705",null));e.default=ut.exports}}]);